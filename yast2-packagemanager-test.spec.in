#
# spec file for package yast2-packagemanager-test (Version 2.9.0)
#
# Copyright (c) 2004 SuSE Linux AG, Nuernberg, Germany.
# This file and all modifications and additions to the pristine
# package are under the same license as the package itself.
#
# Please submit bugfixes or comments via http://www.suse.de/feedback/which 

Name:         yast2-packagemanager-test
Version:      @VERSION@
Release:      0
License:      YaST License
Group:        System/YaST
BuildRoot:    %{_tmppath}/%{name}-%{version}-build
BuildRequires: apache2 cron gcc-c++ gdb krb5-devel libapr-util1-devel libapr1-devel lukemftp mm pcre-devel popt-devel pure-ftpd w3m yast2-packagemanager
Source0:      yast2-packagemanager-test-@VERSION@.tar.bz2
prefix:		/usr
Summary:      yast2-packagemanager tests

%description
This package contains tests for the yast2-packagemanager package. They
are intended to be run in the autobuild environment.



Authors:
--------
    Cornelius Schumacher <cschum@suse.de>

SuSE series: suse

%prep
%setup
mkdir -p /var/adm/YaST
ln -s %{name}-%{version} ../%{name}
cd src
cp -r ProdDB /var/adm/YaST
#mv proc/* /proc
cp -r test-patches/i386 /srv/ftp
mkdir -p ~/.yast2
cp log.conf ~/.yast2
touch /etc/apache2/sysconfig.d/include.conf

%build

export Y2DEBUG=1
export Y2SLOG_FILE=/tmp/y2log
cd src
./testit --arch=%{_arch} --loglines 500

%install
mkdir -p $RPM_BUILD_ROOT/var/lib/YaST2/tests
touch $RPM_BUILD_ROOT/var/lib/YaST2/tests/yast2-packagemanager.success

%clean
[ "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != "/" ] && rm -rf "$RPM_BUILD_ROOT"

%files
%defattr(-,root,root)
/var/lib/YaST2/tests/

%changelog -n yast2-packagemanager-test
* Fri Jan 23 2004 - cschum@suse.de
- Initial version
